<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>SHyFT: shyft::timeseries Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SHyFT
   &#160;<span id="projectnumber">master</span>
   </div>
   <div id="projectbrief">SHyFT</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespaceshyft_1_1timeseries.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">shyft::timeseries Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The timeseries namespace contains all needed concepts related to representing and handling time-series concepts efficiently.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1average__accessor.html">average_accessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classshyft_1_1timeseries_1_1average__accessor.html" title="average_accessor provides a projection/interpretation of the values of a point source on to a time-ax...">average_accessor</a> provides a projection/interpretation of the values of a point source on to a time-axis as provided with semantics as needed/practical for this project.  <a href="classshyft_1_1timeseries_1_1average__accessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1constant__timeseries.html">constant_timeseries</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A constant_source, just return the same constant value for all points.  <a href="classshyft_1_1timeseries_1_1constant__timeseries.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1direct__accessor.html">direct_accessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="classshyft_1_1timeseries_1_1direct__accessor.html" title="The direct_accessor template is a fast accessor. ">direct_accessor</a> template is a fast accessor.  <a href="classshyft_1_1timeseries_1_1direct__accessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1direct__accessor_3_01constant__timeseries_3_01_t_a_01_4_00_01_t_a_01_4.html">direct_accessor&lt; constant_timeseries&lt; TA &gt;, TA &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialization of <a class="el" href="classshyft_1_1timeseries_1_1direct__accessor.html" title="The direct_accessor template is a fast accessor. ">direct_accessor</a> for a constant_source.  <a href="classshyft_1_1timeseries_1_1direct__accessor_3_01constant__timeseries_3_01_t_a_01_4_00_01_t_a_01_4.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1direct__accessor_3_01point__timeseries_3_01_t_a_01_4_00_01_t_a_01_4.html">direct_accessor&lt; point_timeseries&lt; TA &gt;, TA &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialization of the <a class="el" href="classshyft_1_1timeseries_1_1direct__accessor.html" title="The direct_accessor template is a fast accessor. ">direct_accessor</a> template for commonly used point_source&lt;TA&gt;  <a href="classshyft_1_1timeseries_1_1direct__accessor_3_01point__timeseries_3_01_t_a_01_4_00_01_t_a_01_4.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1function__timeseries.html">function_timeseries</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A point source with a time_axis, and a function Fx(utctime t) that gives the value at utctime t, where t is from timeaxis(i).t suitable for functional type of time series.  <a href="classshyft_1_1timeseries_1_1function__timeseries.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structshyft_1_1timeseries_1_1point.html">point</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">simply a point identified by utctime t and value v  <a href="structshyft_1_1timeseries_1_1point.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1point__timeaxis.html">point_timeaxis</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="classshyft_1_1timeseries_1_1point__timeaxis.html" title="A point_timeaxis constructs a set of time-periods, with number of consecutive periods equal to n-1 ti...">point_timeaxis</a> constructs a set of time-periods, with number of consecutive periods equal to n-1 time points supplied. You need to supply at least two points to get a valid time-axis. TODO: Not perfectly defined, ref index_of and op() ..  <a href="classshyft_1_1timeseries_1_1point__timeaxis.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1point__timeseries.html">point_timeseries</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A point source with time_axis.  <a href="classshyft_1_1timeseries_1_1point__timeseries.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1sin__fx.html">sin_fx</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshyft_1_1timeseries_1_1timeaxis.html">timeaxis</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The timeaxis supports most common needs in <a class="el" href="namespaceshyft_1_1core.html">shyft::core</a>, especially for regular forecast scenario with interval like hour, day, or 3-hours etc. It is easy to create, and light-weight/high speed implementation.  <a href="classshyft_1_1timeseries_1_1timeaxis.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a7e2ee9dcee400bdc9fa6a9c6c828d0ea"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshyft_1_1timeseries.html#a7e2ee9dcee400bdc9fa6a9c6c828d0ea">point_interpretation_policy</a> { <a class="el" href="namespaceshyft_1_1timeseries.html#a7e2ee9dcee400bdc9fa6a9c6c828d0eaa2ba877b0fea2668327cdcdb24c59a34b">POINT_INSTANT_VALUE</a>, 
<a class="el" href="namespaceshyft_1_1timeseries.html#a7e2ee9dcee400bdc9fa6a9c6c828d0eaa7a710c91f7e701c216acf4a4610f1815">POINT_AVERAGE_VALUE</a>
 }<tr class="memdesc:a7e2ee9dcee400bdc9fa6a9c6c828d0ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerates how points are to be understood (most reasonably) when mapping to f(t) in the time-series concept.  <a href="namespaceshyft_1_1timeseries.html#a7e2ee9dcee400bdc9fa6a9c6c828d0ea">More...</a><br /></td></tr>
<tr class="separator:a7e2ee9dcee400bdc9fa6a9c6c828d0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6ac69cec9800d352526bab7474b52ab5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshyft_1_1timeseries.html#a6ac69cec9800d352526bab7474b52ab5">operator==</a> (const <a class="el" href="structshyft_1_1timeseries_1_1point.html">point</a> &amp;a, const <a class="el" href="structshyft_1_1timeseries_1_1point.html">point</a> &amp;b)</td></tr>
<tr class="memdesc:a6ac69cec9800d352526bab7474b52ab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">point a and b are considered equal if same time t and value-diff less than EPS  <a href="#a6ac69cec9800d352526bab7474b52ab5">More...</a><br /></td></tr>
<tr class="separator:a6ac69cec9800d352526bab7474b52ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ae2034e3c41545804ad8afac947c2ba"><td class="memTemplParams" colspan="2">template&lt;class S &gt; </td></tr>
<tr class="memitem:a0ae2034e3c41545804ad8afac947c2ba"><td class="memTemplItemLeft" align="right" valign="top">size_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceshyft_1_1timeseries.html#a0ae2034e3c41545804ad8afac947c2ba">hint_based_search</a> (const S &amp;source, const <a class="el" href="structshyft_1_1core_1_1utcperiod.html">utcperiod</a> &amp;p, size_t i)</td></tr>
<tr class="memdesc:a0ae2034e3c41545804ad8afac947c2ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">hint_based search to eliminate binary-search in irregular time-point series. utilizing the fact that most access are periods, sequential, so the average_xxx functions can utilize this, and keep the returned index as a hint for the next request for average_xxx value.  <a href="#a0ae2034e3c41545804ad8afac947c2ba">More...</a><br /></td></tr>
<tr class="separator:a0ae2034e3c41545804ad8afac947c2ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d651da5f6e3bc99dabe237a36c6e66c"><td class="memTemplParams" colspan="2">template&lt;class S &gt; </td></tr>
<tr class="memitem:a0d651da5f6e3bc99dabe237a36c6e66c"><td class="memTemplItemLeft" align="right" valign="top">double&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceshyft_1_1timeseries.html#a0d651da5f6e3bc99dabe237a36c6e66c">average_value</a> (const S &amp;source, const <a class="el" href="structshyft_1_1core_1_1utcperiod.html">utcperiod</a> &amp;p, size_t &amp;last_idx, bool linear=true)</td></tr>
<tr class="memdesc:a0d651da5f6e3bc99dabe237a36c6e66c"><td class="mdescLeft">&#160;</td><td class="mdescRight">average_value provides a projection/interpretation of the values of a pointsource on to a time-axis as provided. This includes interpolation and true average, linear between points and nan-handling semantics. In addition the Accessor allows fast sequential access to these values using clever caching of the last position used in the underlying point source. The time axis and point source can be of any type as listed above as long as the basic type requirement as described below are satisfied.  <a href="#a0d651da5f6e3bc99dabe237a36c6e66c">More...</a><br /></td></tr>
<tr class="separator:a0d651da5f6e3bc99dabe237a36c6e66c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5d87ceebd877139e3e33282ad54182"><td class="memTemplParams" colspan="2">template&lt;class A &gt; </td></tr>
<tr class="memitem:a9b5d87ceebd877139e3e33282ad54182"><td class="memTemplItemLeft" align="right" valign="top">double&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceshyft_1_1timeseries.html#a9b5d87ceebd877139e3e33282ad54182">l2_norm</a> (A &amp;ts)</td></tr>
<tr class="memdesc:a9b5d87ceebd877139e3e33282ad54182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discrete l2 norm of input time series treated as a vector: (sqrt(sum(x_i)))  <a href="#a9b5d87ceebd877139e3e33282ad54182">More...</a><br /></td></tr>
<tr class="separator:a9b5d87ceebd877139e3e33282ad54182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ecf5b3080c2f416bb7737978cfdbcc"><td class="memTemplParams" colspan="2">template&lt;class TSA1 , class TSA2 &gt; </td></tr>
<tr class="memitem:ac3ecf5b3080c2f416bb7737978cfdbcc"><td class="memTemplItemLeft" align="right" valign="top">double&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceshyft_1_1timeseries.html#ac3ecf5b3080c2f416bb7737978cfdbcc">nash_sutcliffe_goal_function</a> (const TSA1 &amp;observed_ts, const TSA2 &amp;model_ts)</td></tr>
<tr class="memdesc:ac3ecf5b3080c2f416bb7737978cfdbcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nash Sutcliffe model effiency coefficient based goal function http://en.wikipedia.org/wiki/NashE2%80%93Sutcliffe_model_efficiency_coefficient.  <a href="#ac3ecf5b3080c2f416bb7737978cfdbcc">More...</a><br /></td></tr>
<tr class="separator:ac3ecf5b3080c2f416bb7737978cfdbcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad8092259a7bc0368f2834a22470093"><td class="memTemplParams" colspan="2">template&lt;class running_stat_calculator , class TSA1 , class TSA2 &gt; </td></tr>
<tr class="memitem:a3ad8092259a7bc0368f2834a22470093"><td class="memTemplItemLeft" align="right" valign="top">double&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceshyft_1_1timeseries.html#a3ad8092259a7bc0368f2834a22470093">kling_gupta_goal_function</a> (const TSA1 &amp;observed_ts, const TSA2 &amp;model_ts, double s_r, double s_a, double s_b)</td></tr>
<tr class="memdesc:a3ad8092259a7bc0368f2834a22470093"><td class="mdescLeft">&#160;</td><td class="mdescRight">KLING-GUPTA Journal of Hydrology 377 (2009) 80–91, page 83, formula (10), where shorthands are a=alpha, b=betha, q =sigma, u=my, s=simulated, o=observed  <a href="#a3ad8092259a7bc0368f2834a22470093">More...</a><br /></td></tr>
<tr class="separator:a3ad8092259a7bc0368f2834a22470093"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a367e6bfc3e16a3826515d557e196dbd6"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshyft_1_1timeseries.html#a367e6bfc3e16a3826515d557e196dbd6">EPS</a> =1e-12</td></tr>
<tr class="separator:a367e6bfc3e16a3826515d557e196dbd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The timeseries namespace contains all needed concepts related to representing and handling time-series concepts efficiently. </p>
<p>concepts: -#: point, -a time,value pair,utctime,double representing points on a time-series, f(t). -#: timeaxis, -(TA)the fundation for the timeline, represented by the timeaxis class, a non-overlapping set of periods ordered ascending. -#: point_source,(S) - provide a source of points, that can be interpreted by an accessor as a f(t) -#: accessor, -(A) <a class="el" href="classshyft_1_1timeseries_1_1average__accessor.html" title="average_accessor provides a projection/interpretation of the values of a point source on to a time-ax...">average_accessor</a> and <a class="el" href="classshyft_1_1timeseries_1_1direct__accessor.html" title="The direct_accessor template is a fast accessor. ">direct_accessor</a>, provides transformation from f(t) to some provide time-axis </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a7e2ee9dcee400bdc9fa6a9c6c828d0ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="namespaceshyft_1_1timeseries.html#a7e2ee9dcee400bdc9fa6a9c6c828d0ea">shyft::timeseries::point_interpretation_policy</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerates how points are to be understood (most reasonably) when mapping to f(t) in the time-series concept. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a7e2ee9dcee400bdc9fa6a9c6c828d0eaa2ba877b0fea2668327cdcdb24c59a34b"></a>POINT_INSTANT_VALUE&#160;</td><td class="fielddoc">
<p>the point value represents the value at the specific time (or centered around that time),typically linear accessor </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a7e2ee9dcee400bdc9fa6a9c6c828d0eaa7a710c91f7e701c216acf4a4610f1815"></a>POINT_AVERAGE_VALUE&#160;</td><td class="fielddoc">
<p>the point value represents the average of the interval, typically stair-case start of step accessor </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="timeseries_8h_source.html#l00123">123</a> of file <a class="el" href="timeseries_8h_source.html">timeseries.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0d651da5f6e3bc99dabe237a36c6e66c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class S &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">double shyft::timeseries::average_value </td>
          <td>(</td>
          <td class="paramtype">const S &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structshyft_1_1core_1_1utcperiod.html">utcperiod</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>last_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>linear</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>average_value provides a projection/interpretation of the values of a pointsource on to a time-axis as provided. This includes interpolation and true average, linear between points and nan-handling semantics. In addition the Accessor allows fast sequential access to these values using clever caching of the last position used in the underlying point source. The time axis and point source can be of any type as listed above as long as the basic type requirement as described below are satisfied. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">S</td><td>point source, must provide:<ol type="1">
<li>.size() const  -&gt; number of points in the source</li>
<li>.index_of(utctime tx) const -&gt; return lower bound index or -1 for the supplied tx</li>
<li>.get(size_t i) const  -&gt; return the i'th point (t,v) </li>
</ol>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>of type S </td></tr>
    <tr><td class="paramname">p</td><td>the period [start,end) on time-axis </td></tr>
    <tr><td class="paramname">last_idx,in/out,position</td><td>of the last time point used on the source, updated after each call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double, the value at the i'th interval of the supplied time-axis </dd></dl>

<p>Definition at line <a class="el" href="timeseries_8h_source.html#l00361">361</a> of file <a class="el" href="timeseries_8h_source.html">timeseries.h</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceshyft_1_1timeseries_a0d651da5f6e3bc99dabe237a36c6e66c_cgraph.png" border="0" usemap="#namespaceshyft_1_1timeseries_a0d651da5f6e3bc99dabe237a36c6e66c_cgraph" alt=""/></div>
<map name="namespaceshyft_1_1timeseries_a0d651da5f6e3bc99dabe237a36c6e66c_cgraph" id="namespaceshyft_1_1timeseries_a0d651da5f6e3bc99dabe237a36c6e66c_cgraph">
<area shape="rect" id="node2" href="namespaceshyft_1_1timeseries.html#a0ae2034e3c41545804ad8afac947c2ba" title="hint_based search to eliminate binary&#45;search in irregular time&#45;point series. utilizing the fact that ..." alt="" coords="187,5,318,47"/>
<area shape="rect" id="node3" href="structshyft_1_1core_1_1utcperiod.html#a3aabb6cc1736f3b4c678efb7da0226e2" title="shyft::core::utcperiod\l::timespan" alt="" coords="180,71,325,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceshyft_1_1timeseries_a0d651da5f6e3bc99dabe237a36c6e66c_icgraph.png" border="0" usemap="#namespaceshyft_1_1timeseries_a0d651da5f6e3bc99dabe237a36c6e66c_icgraph" alt=""/></div>
<map name="namespaceshyft_1_1timeseries_a0d651da5f6e3bc99dabe237a36c6e66c_icgraph" id="namespaceshyft_1_1timeseries_a0d651da5f6e3bc99dabe237a36c6e66c_icgraph">
<area shape="rect" id="node2" href="classshyft_1_1timeseries_1_1average__accessor.html#a2500b93ac15478aa6857fa8dc2729d91" title="shyft::timeseries::\laverage_accessor::value" alt="" coords="180,13,347,54"/>
<area shape="rect" id="node3" href="structshyft_1_1core_1_1model__calibration_1_1ts__transform.html#a227bf627cd34db1751e68dd60edfa49b" title="transform the supplied time&#45;series, f(t) interpreted according to its point_interpretation() policy i..." alt="" coords="395,5,564,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ae2034e3c41545804ad8afac947c2ba"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class S &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">size_t shyft::timeseries::hint_based_search </td>
          <td>(</td>
          <td class="paramtype">const S &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structshyft_1_1core_1_1utcperiod.html">utcperiod</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>hint_based search to eliminate binary-search in irregular time-point series. utilizing the fact that most access are periods, sequential, so the average_xxx functions can utilize this, and keep the returned index as a hint for the next request for average_xxx value. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">S</td><td>a point ts source, must have .get(i) -&gt;point, and .size(), and .index_of(t)-&gt;size_t </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>a point ts source as described above </td></tr>
    <tr><td class="paramname">p</td><td>utcperiod for which we search a start point &lt;= p.start </td></tr>
    <tr><td class="paramname">i</td><td>the start-of-search hint, could be -1, then ts.index_of(p.start) is used to figure out the ix. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="timeseries_8h_source.html#l00310">310</a> of file <a class="el" href="timeseries_8h_source.html">timeseries.h</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceshyft_1_1timeseries_a0ae2034e3c41545804ad8afac947c2ba_icgraph.png" border="0" usemap="#namespaceshyft_1_1timeseries_a0ae2034e3c41545804ad8afac947c2ba_icgraph" alt=""/></div>
<map name="namespaceshyft_1_1timeseries_a0ae2034e3c41545804ad8afac947c2ba_icgraph" id="namespaceshyft_1_1timeseries_a0ae2034e3c41545804ad8afac947c2ba_icgraph">
<area shape="rect" id="node2" href="namespaceshyft_1_1timeseries.html#a0d651da5f6e3bc99dabe237a36c6e66c" title="average_value provides a projection/interpretation of the values of a pointsource on to a time&#45;axis a..." alt="" coords="184,13,311,54"/>
<area shape="rect" id="node3" href="classshyft_1_1timeseries_1_1average__accessor.html#a2500b93ac15478aa6857fa8dc2729d91" title="shyft::timeseries::\laverage_accessor::value" alt="" coords="359,13,525,54"/>
<area shape="rect" id="node4" href="structshyft_1_1core_1_1model__calibration_1_1ts__transform.html#a227bf627cd34db1751e68dd60edfa49b" title="transform the supplied time&#45;series, f(t) interpreted according to its point_interpretation() policy i..." alt="" coords="573,5,743,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ad8092259a7bc0368f2834a22470093"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class running_stat_calculator , class TSA1 , class TSA2 &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">double shyft::timeseries::kling_gupta_goal_function </td>
          <td>(</td>
          <td class="paramtype">const TSA1 &amp;&#160;</td>
          <td class="paramname"><em>observed_ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TSA2 &amp;&#160;</td>
          <td class="paramname"><em>model_ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>s_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>s_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>s_b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>KLING-GUPTA Journal of Hydrology 377 (2009) 80–91, page 83, formula (10), where shorthands are a=alpha, b=betha, q =sigma, u=my, s=simulated, o=observed </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">running_stat_calculator</td><td>template class like dlib::running_scalar_covariance&lt;double&gt; that supports .add(x), hten mean_x|_y stddev_x|_y,correlation </td></tr>
    <tr><td class="paramname">TSA1</td><td>time-series accessor that supports .size(), .value(i) </td></tr>
    <tr><td class="paramname">TSA2</td><td>time-series accessor that supports .size(), .value(i) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">observed_ts</td><td>the time-series that is the target, observed true value </td></tr>
    <tr><td class="paramname">model_ts</td><td>the time-series that is the model simulated/calculated ts </td></tr>
    <tr><td class="paramname">s_r</td><td>the kling gupta scale r factor (weight the correlation of goal function) </td></tr>
    <tr><td class="paramname">s_a</td><td>the kling gupta scale a factor (weight the relative average of the goal function) </td></tr>
    <tr><td class="paramname">s_b</td><td>the kling gupta scale b factor (weight the relative standard deviation of the goal function) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EDs= 1-KGEs, that have a minimum at zero </dd></dl>

<p>Definition at line <a class="el" href="timeseries_8h_source.html#l00657">657</a> of file <a class="el" href="timeseries_8h_source.html">timeseries.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9b5d87ceebd877139e3e33282ad54182"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class A &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">double shyft::timeseries::l2_norm </td>
          <td>(</td>
          <td class="paramtype">A &amp;&#160;</td>
          <td class="paramname"><em>ts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Discrete l2 norm of input time series treated as a vector: (sqrt(sum(x_i))) </p>
<dl class="section note"><dt>Note</dt><dd>only used for debug/printout during calibration </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">A</td><td>the accessor type that implement: -#: .size() number of elements the accessor can provide -#: .value(i) value of the i'th element in the accessor </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="timeseries_8h_source.html#l00599">599</a> of file <a class="el" href="timeseries_8h_source.html">timeseries.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac3ecf5b3080c2f416bb7737978cfdbcc"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class TSA1 , class TSA2 &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">double shyft::timeseries::nash_sutcliffe_goal_function </td>
          <td>(</td>
          <td class="paramtype">const TSA1 &amp;&#160;</td>
          <td class="paramname"><em>observed_ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TSA2 &amp;&#160;</td>
          <td class="paramname"><em>model_ts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Nash Sutcliffe model effiency coefficient based goal function http://en.wikipedia.org/wiki/NashE2%80%93Sutcliffe_model_efficiency_coefficient. </p>
<dl class="section note"><dt>Note</dt><dd>throws runtime exception if supplied arguments differs in .size() or .size()==0 </dd>
<dd>
if obs. is a constant, we get 1/0 </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">TSA1</td><td>a ts accessor for the observed ts ( support .size() and double .value(i)) </td></tr>
    <tr><td class="paramname">TSA2</td><td>a ts accessor for the observed ts ( support .size() and double .value(i)) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">observed_ts</td><td>contains the observed values for the model </td></tr>
    <tr><td class="paramname">model_ts</td><td>contains the (simulated) model output values </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1- E, given E=n.s, i.e. 0 is best performance &gt; 0 .. +oo is less good performance. </dd></dl>

<p>Definition at line <a class="el" href="timeseries_8h_source.html#l00619">619</a> of file <a class="el" href="timeseries_8h_source.html">timeseries.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6ac69cec9800d352526bab7474b52ab5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool shyft::timeseries::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structshyft_1_1timeseries_1_1point.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structshyft_1_1timeseries_1_1point.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>point a and b are considered equal if same time t and value-diff less than EPS </p>

<p>Definition at line <a class="el" href="timeseries_8h_source.html#l00051">51</a> of file <a class="el" href="timeseries_8h_source.html">timeseries.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a367e6bfc3e16a3826515d557e196dbd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double shyft::timeseries::EPS =1e-12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="timeseries_8h_source.html#l00034">34</a> of file <a class="el" href="timeseries_8h_source.html">timeseries.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceshyft.html">shyft</a></li><li class="navelem"><a class="el" href="namespaceshyft_1_1timeseries.html">timeseries</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
